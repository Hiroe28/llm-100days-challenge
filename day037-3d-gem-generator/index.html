<!DOCTYPE html>
<html lang="ja">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6a1b9a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:title" content="3Då®çŸ³ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå®çŸ³ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ„ãƒ¼ãƒ«" />
    <meta property="og:description" content="Three.jsã§ä½œã‚‰ã‚ŒãŸç¾ã—ã„3Då®çŸ³ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚9ç¨®é¡ã®å½¢çŠ¶ã€ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã€ç‰©ç†ç‰¹æ€§ã®èª¿æ•´ã€èª•ç”ŸçŸ³æ©Ÿèƒ½ãªã©ã€‚ãƒªã‚¢ãƒ«ãªè¼ãã‚’æ”¾ã¤å®çŸ³ã‚’ä½œæˆã—ã¦ç”»åƒä¿å­˜ã‚‚å¯èƒ½ã€‚" />
    <meta property="og:image" content="https://hiroe28.github.io/llm-100days-challenge/day037-3d-gem-generator/screenshot.png" />
    <meta property="og:url" content="https://hiroe28.github.io/llm-100days-challenge/day037-3d-gem-generator/index.html" />
    <meta property="og:type" content="website" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="3Då®çŸ³ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼" />
    <meta name="twitter:description" content="Three.jsã§ä½œã‚‰ã‚ŒãŸç¾ã—ã„3Då®çŸ³ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚9ç¨®é¡ã®å½¢çŠ¶ã€ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã€ç‰©ç†ç‰¹æ€§ã®èª¿æ•´ã€èª•ç”ŸçŸ³æ©Ÿèƒ½ãªã©ã€‚ãƒªã‚¢ãƒ«ãªè¼ãã‚’æ”¾ã¤å®çŸ³ã‚’ä½œæˆã—ã¦ç”»åƒä¿å­˜ã‚‚å¯èƒ½ã€‚" />
    <meta name="twitter:image" content="https://hiroe28.github.io/llm-100days-challenge/day037-3d-gem-generator/screenshot.png" />

    <title>3Då®çŸ³ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Three.jsã¨OrbitControlsã€OBJLoaderã‚’CDNã‹ã‚‰ç›´æ¥èª­ã¿è¾¼ã¿ -->
    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="main.js"></script>
</head>
<body>
    <div class="container">
        <h1>3Då®çŸ³ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
        
        <div class="app-container">
            <div class="gem-container" id="gem-container">
                <!-- èª­ã¿è¾¼ã¿ä¸­ã®è¡¨ç¤º -->
                <div id="loading-indicator" class="loading-indicator">
                    <div class="spinner"></div>
                    <p>å®çŸ³ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿ä¸­...</p>
                    <div id="loading-error" class="loading-error" style="display: none; color: red; margin-top: 10px; font-size: 0.8rem;"></div>
                </div>
                
                <!-- è‡ªå‹•å›è»¢ãƒœã‚¿ãƒ³ -->
                <button id="auto-rotate" class="auto-rotate-button">
                    <span class="button-icon">ğŸ”„</span>
                    <span class="button-text">è‡ªå‹•å›è»¢</span>
                </button>
            </div>
            
            <div class="controls-panel">
                <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="tab-navigation">
                    <button class="tab-button active" data-tab="basic">åŸºæœ¬è¨­å®š</button>
                    <button class="tab-button" data-tab="special">èª•ç”ŸçŸ³</button>
                </div>
                
                <!-- åŸºæœ¬è¨­å®šã‚¿ãƒ– -->
                <div class="tab-content active" id="basic-tab">
                    <div class="form-group">
                        <label for="shape">å®çŸ³ã®å½¢</label>
                        <select id="shape">
                            <option value="round">ãƒ©ã‚¦ãƒ³ãƒ‰</option>
                            <option value="oval">ã‚ªãƒ¼ãƒãƒ«</option>
                            <option value="princess">ãƒ—ãƒªãƒ³ã‚»ã‚¹</option>
                            <option value="pear">ãƒšã‚¢</option>
                            <option value="marquise">ãƒãƒ¼ã‚­ãƒ¼ã‚¹</option>
                            <option value="heart">ãƒãƒ¼ãƒˆ</option>
                            <option value="trillion">ãƒˆãƒªãƒªã‚ªãƒ³</option>
                            <option value="radiant">ãƒ©ãƒ‡ã‚£ã‚¢ãƒ³ãƒˆ</option>
                            <option value="emerald">ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="color">å®çŸ³ã®è‰²</label>
                        <div class="color-control">
                            <input type="color" id="color" value="#ffffff">
                            <div id="color-palette" class="color-palette">
                                <!-- ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã¯JavaScriptã§ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="sparkle-intensity">è¼ãã®å¼·ã•</label>
                        <div class="slider-container">
                            <input type="range" id="sparkle-intensity" min="0" max="2" step="0.1" value="1.0">
                            <span id="sparkle-value" class="slider-value">1.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="roughness">å…‰æ²¢</label>
                        <div class="slider-container">
                            <input type="range" id="roughness" min="0" max="1" step="0.01" value="0.01">
                            <span id="roughness-value" class="slider-value">0.01</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="transmission">é€æ˜åº¦</label>
                        <div class="slider-container">
                            <input type="range" id="transmission" min="0" max="1" step="0.01" value="0.95">
                            <span id="transmission-value" class="slider-value">0.95</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="ior">å±ˆæŠ˜ç‡</label>
                        <div class="slider-container">
                            <input type="range" id="ior" min="1" max="2.5" step="0.01" value="2.417">
                            <span id="ior-value" class="slider-value">2.417</span>
                        </div>
                    </div>
                </div>
                
                <!-- èª•ç”ŸçŸ³ã‚¿ãƒ– -->
                <div class="tab-content" id="special-tab">
                    <div class="birthstone-section">
                        <div class="form-group">
                            <label for="birthstone-selector">èª•ç”Ÿæœˆã‚’é¸æŠ</label>
                            <select id="birthstone-selector">
                                <option value="">-- èª•ç”Ÿæœˆã‚’é¸æŠ --</option>
                                <!-- JavaScriptã§ç”Ÿæˆ -->
                            </select>
                        </div>
                        
                        <div id="birthstone-info" class="info-box"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="background-selector">èƒŒæ™¯ã‚¹ã‚¿ã‚¤ãƒ«</label>
                        <select id="background-selector">
                            <option value="default">ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰</option>
                            <option value="gradient">ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</option>
                            <option value="stars">æ˜Ÿç©º</option>
                            <option value="luxury">é«˜ç´šæ„Ÿ</option>
                            <option value="abstract">æŠ½è±¡çš„</option>
                        </select>
                    </div>
                </div>
                
                <div class="gem-presets">
                    <div class="preset-buttons">
                        <button id="preset-diamond" class="preset-button">ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰</button>
                        <button id="preset-ruby" class="preset-button">ãƒ«ãƒ“ãƒ¼</button>
                        <button id="preset-sapphire" class="preset-button">ã‚µãƒ•ã‚¡ã‚¤ã‚¢</button>
                        <button id="preset-emerald" class="preset-button">ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰</button>
                        <button id="preset-amethyst" class="preset-button">ã‚¢ãƒ¡ã‚¸ã‚¹ãƒˆ</button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="save-image" class="action-button">
                        <span class="button-icon">ğŸ“·</span>
                        <span class="button-text">ç”»åƒä¿å­˜</span>
                    </button>
                    <button id="save-settings" class="action-button">
                        <span class="button-icon">âš™ï¸</span>
                        <span class="button-text">è¨­å®šä¿å­˜</span>
                    </button>
                    <button id="load-settings" class="action-button">
                        <span class="button-icon">ğŸ“‚</span>
                        <span class="button-text">è¨­å®šèª­è¾¼</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="saved-gems">
            <h2>ä¿å­˜ã—ãŸå®çŸ³</h2>
            <div class="saved-gems-list" id="saved-gems-list"></div>
        </div>
    </div>
    <script>
        // ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ ã«åˆã‚ã›ãŸãƒ‘ã‚¹è¨­å®š
        window.MODEL_BASE_PATH = './asset/';  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹
        
        // ãƒªãƒã‚¸ãƒˆãƒªå†…ã§ã®å®Ÿè¡Œã‚’æ¤œå‡ºã™ã‚‹
        if (window.location.href.includes('llm-100days-challenge')) {
            window.MODEL_BASE_PATH = '/llm-100days-challenge/day037-3d-gem-generator/asset/';
        }
        
        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ç”¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        window.CACHE_BUSTER = Date.now();
    </script>    <!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ã™ã‚‹
            const tabNavigation = document.querySelector('.tab-navigation');
            if (tabNavigation && window.innerWidth <= 767) {
                tabNavigation.style.overflowX = 'auto';
                tabNavigation.style.WebkitOverflowScrolling = 'touch';
                tabNavigation.style.scrollBehavior = 'smooth';
                tabNavigation.style.scrollSnapType = 'x mandatory';
            }
            
            tabButtons.forEach(button => {
                // ã‚¿ãƒƒãƒ—é ˜åŸŸã®æ‹¡å¤§
                button.style.padding = window.innerWidth <= 767 ? '10px 15px' : '8px 15px';
                button.style.scrollSnapAlign = 'start';
                
                button.addEventListener('click', () => {
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                    button.classList.add('active');
                    const tabId = button.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // ã‚¹ãƒ¯ã‚¤ãƒ—ã§ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
            let startX = 0;
            let currentX = 0;
            
            tabNavigation.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });
            
            tabNavigation.addEventListener('touchmove', (e) => {
                currentX = e.touches[0].clientX;
            });
            
            tabNavigation.addEventListener('touchend', () => {
                const diff = startX - currentX;
                const tabs = document.querySelectorAll('.tab-button');
                const activeTab = document.querySelector('.tab-button.active');
                const activeIndex = Array.from(tabs).indexOf(activeTab);
                
                if (Math.abs(diff) > 50) { // ååˆ†ãªã‚¹ãƒ¯ã‚¤ãƒ—è·é›¢
                    if (diff > 0 && activeIndex < tabs.length - 1) {
                        // å³ã«ã‚¹ãƒ¯ã‚¤ãƒ— -> æ¬¡ã®ã‚¿ãƒ–
                        tabs[activeIndex + 1].click();
                    } else if (diff < 0 && activeIndex > 0) {
                        // å·¦ã«ã‚¹ãƒ¯ã‚¤ãƒ— -> å‰ã®ã‚¿ãƒ–
                        tabs[activeIndex - 1].click();
                    }
                }
            });
        });
    </script>
</body>
</html>