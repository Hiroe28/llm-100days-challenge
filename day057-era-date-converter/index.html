<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¥¿æš¦å’Œæš¦å¤‰æ›ãƒ„ãƒ¼ãƒ« - é«˜ç²¾åº¦ãªæ—¥ä»˜å¤‰æ›ã¨å¹´é½¢è¨ˆç®—</title>
    <meta name="description" content="è¥¿æš¦â‡„å’Œæš¦ã®ç›¸äº’å¤‰æ›ã€å¹´é½¢è¨ˆç®—ã€ç”Ÿå¹´è¨ˆç®—ãŒã§ãã‚‹é«˜ç²¾åº¦ãƒ„ãƒ¼ãƒ«ã€‚æ˜æ²»ã‹ã‚‰ä»¤å’Œã¾ã§å¯¾å¿œã€å…ƒå¹´è¡¨è¨˜ã‚„è¦ªåˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã€‚">
    
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:title" content="è¥¿æš¦å’Œæš¦å¤‰æ›ãƒ„ãƒ¼ãƒ« - é«˜ç²¾åº¦ãªæ—¥ä»˜å¤‰æ›ã¨å¹´é½¢è¨ˆç®—" />
    <meta property="og:description" content="è¥¿æš¦â‡„å’Œæš¦ã®ç›¸äº’å¤‰æ›ã€å¹´é½¢è¨ˆç®—ã€ç”Ÿå¹´è¨ˆç®—ãŒã§ãã‚‹é«˜ç²¾åº¦ãƒ„ãƒ¼ãƒ«ã€‚æ˜æ²»ã‹ã‚‰ä»¤å’Œã¾ã§å¯¾å¿œã€å…ƒå¹´è¡¨è¨˜ã‚„è¦ªåˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã€‚" />
    <meta property="og:image" content="https://hiroe28.github.io/llm-100days-challenge/day057-era-date-converter/screenshot.png" />
    <meta property="og:url" content="https://hiroe28.github.io/llm-100days-challenge/day057-era-date-converter/index.html" />
    <meta property="og:type" content="website" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="è¥¿æš¦å’Œæš¦å¤‰æ›ãƒ„ãƒ¼ãƒ«" />
    <meta name="twitter:description" content="è¥¿æš¦â‡„å’Œæš¦ã®ç›¸äº’å¤‰æ›ã€å¹´é½¢è¨ˆç®—ã€ç”Ÿå¹´è¨ˆç®—ãŒã§ãã‚‹é«˜ç²¾åº¦ãƒ„ãƒ¼ãƒ«ã€‚æ˜æ²»ã‹ã‚‰ä»¤å’Œã¾ã§å¯¾å¿œã€å…ƒå¹´è¡¨è¨˜ã‚„è¦ªåˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã€‚" />
    <meta name="twitter:image" content="https://hiroe28.github.io/llm-100days-challenge/day057-era-date-converter/screenshot.png" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            border: none;
            background: none;
            font-size: 1rem;
        }

        .tab.active {
            background: white;
            color: #0891b2;
            border-bottom: 3px solid #0891b2;
        }

        .tab:hover:not(.active) {
            background: #f1f5f9;
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #0891b2;
            box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.1);
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .era-inputs {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr;
            gap: 15px;
            align-items: end;
        }

        .btn {
            background: linear-gradient(135deg, #0891b2, #0e7490);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-bottom: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(8, 145, 178, 0.3);
        }

        .result {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: #0c4a6e;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #0891b2;
            line-height: 1.6;
        }

        .error {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            color: #dc2626;
            border-color: #ef4444;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .content {
                padding: 25px;
            }

            .date-inputs, .era-inputs {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .era-inputs {
                grid-template-columns: 1fr 1fr;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                padding: 15px;
            }
        }

        .info-text {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“… è¥¿æš¦å’Œæš¦å¤‰æ›ãƒ„ãƒ¼ãƒ«</h1>
            <p>é«˜ç²¾åº¦ãªæ—¥ä»˜å¤‰æ›ã¨å¹´é½¢è¨ˆç®—</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(0)">è¥¿æš¦â†’å’Œæš¦</button>
            <button class="tab" onclick="switchTab(1)">å’Œæš¦â†’è¥¿æš¦</button>
            <button class="tab" onclick="switchTab(2)">å¹´é½¢è¨ˆç®—</button>
            <button class="tab" onclick="switchTab(3)">ç”Ÿå¹´è¨ˆç®—</button>
        </div>

        <div class="content">
            <!-- è¥¿æš¦â†’å’Œæš¦å¤‰æ› -->
            <div class="section active" id="section0">
                <div class="form-group">
                    <label>è¥¿æš¦å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <div class="date-inputs">
                        <input type="number" id="seireki-year" placeholder="å¹´" min="1868" max="2100">
                        <input type="number" id="seireki-month" placeholder="æœˆ" min="1" max="12">
                        <input type="number" id="seireki-day" placeholder="æ—¥" min="1" max="31">
                    </div>
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        âš ï¸ æ˜æ²»å…ƒå¹´ï¼ˆ1868å¹´10æœˆ23æ—¥ï¼‰ä»¥é™ã®æ—¥ä»˜ã®ã¿å¯¾å¿œ<br>
                        ğŸ’¡ åŠè§’æ•°å­—ã§ã”å…¥åŠ›ãã ã•ã„
                    </div>
                </div>
                <button class="btn" onclick="convertToWareki()">å’Œæš¦ã«å¤‰æ›</button>
                <div class="result" id="wareki-result">å¤‰æ›çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            </div>

            <!-- å’Œæš¦â†’è¥¿æš¦å¤‰æ› -->
            <div class="section" id="section1">
                <div class="form-group">
                    <label>å’Œæš¦å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <div class="era-inputs">
                        <select id="era-select">
                            <option value="ä»¤å’Œ">ä»¤å’Œ</option>
                            <option value="å¹³æˆ">å¹³æˆ</option>
                            <option value="æ˜­å’Œ">æ˜­å’Œ</option>
                            <option value="å¤§æ­£">å¤§æ­£</option>
                            <option value="æ˜æ²»">æ˜æ²»</option>
                        </select>
                        <input type="number" id="era-year" placeholder="å¹´" min="1">
                        <input type="number" id="era-month" placeholder="æœˆ" min="1" max="12">
                        <input type="number" id="era-day" placeholder="æ—¥" min="1" max="31">
                    </div>
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        âš ï¸ å…ƒå¹´ã¯ã€Œ1ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„<br>
                        ğŸ’¡ åŠè§’æ•°å­—ã§ã”å…¥åŠ›ãã ã•ã„
                    </div>
                </div>
                <button class="btn" onclick="convertToSeireki()">è¥¿æš¦ã«å¤‰æ›</button>
                <div class="result" id="seireki-result">å¤‰æ›çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            </div>

            <!-- å¹´é½¢è¨ˆç®— -->
            <div class="section" id="section2">
                <div class="form-group">
                    <label>ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <div class="era-inputs">
                        <select id="age-era-select">
                            <option value="è¥¿æš¦">è¥¿æš¦</option>
                            <option value="ä»¤å’Œ">ä»¤å’Œ</option>
                            <option value="å¹³æˆ">å¹³æˆ</option>
                            <option value="æ˜­å’Œ">æ˜­å’Œ</option>
                            <option value="å¤§æ­£">å¤§æ­£</option>
                            <option value="æ˜æ²»">æ˜æ²»</option>
                        </select>
                        <input type="number" id="age-birth-year" placeholder="å¹´" min="1">
                        <input type="number" id="age-birth-month" placeholder="æœˆ" min="1" max="12">
                        <input type="number" id="age-birth-day" placeholder="æ—¥" min="1" max="31">
                    </div>
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        âš ï¸ å’Œæš¦å…¥åŠ›æ™‚ã€å…ƒå¹´ã¯ã€Œ1ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                </div>
                <div class="form-group">
                    <label>ã„ã¤æ™‚ç‚¹ã®å¹´é½¢ã‹ï¼ˆçœç•¥å¯ã€ä»Šæ—¥ã®æ—¥ä»˜ã‚’ä½¿ç”¨ï¼‰</label>
                    <div class="era-inputs">
                        <select id="age-ref-era-select">
                            <option value="è¥¿æš¦">è¥¿æš¦</option>
                            <option value="ä»¤å’Œ">ä»¤å’Œ</option>
                            <option value="å¹³æˆ">å¹³æˆ</option>
                            <option value="æ˜­å’Œ">æ˜­å’Œ</option>
                            <option value="å¤§æ­£">å¤§æ­£</option>
                            <option value="æ˜æ²»">æ˜æ²»</option>
                        </select>
                        <input type="number" id="age-ref-year" placeholder="å¹´">
                        <input type="number" id="age-ref-month" placeholder="æœˆ">
                        <input type="number" id="age-ref-day" placeholder="æ—¥">
                    </div>
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        âš ï¸ å’Œæš¦å…¥åŠ›æ™‚ã€å…ƒå¹´ã¯ã€Œ1ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„<br>
                        ğŸ’¡ åŠè§’æ•°å­—ã§ã”å…¥åŠ›ãã ã•ã„
                    </div>
                </div>
                <button class="btn" onclick="calculateAge()">å¹´é½¢ã‚’è¨ˆç®—</button>
                <div class="result" id="age-result">å¹´é½¢ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            </div>

            <!-- ç”Ÿå¹´è¨ˆç®— -->
            <div class="section" id="section3">
                <div class="form-group">
                    <label>ç¾åœ¨ã®å¹´é½¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <input type="number" id="current-age" placeholder="æ­³" min="0" max="150">
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        ğŸ’¡ åŠè§’æ•°å­—ã§ã”å…¥åŠ›ãã ã•ã„
                    </div>
                </div>
                <div class="form-group">
                    <label>ã„ã¤æ™‚ç‚¹ã®å¹´é½¢ã‹ï¼ˆçœç•¥å¯ã€ä»Šæ—¥ã®æ—¥ä»˜ã‚’ä½¿ç”¨ï¼‰</label>
                    <div class="era-inputs">
                        <select id="birth-era-select">
                            <option value="è¥¿æš¦">è¥¿æš¦</option>
                            <option value="ä»¤å’Œ">ä»¤å’Œ</option>
                            <option value="å¹³æˆ">å¹³æˆ</option>
                            <option value="æ˜­å’Œ">æ˜­å’Œ</option>
                            <option value="å¤§æ­£">å¤§æ­£</option>
                            <option value="æ˜æ²»">æ˜æ²»</option>
                        </select>
                        <input type="number" id="birth-ref-year" placeholder="å¹´">
                        <input type="number" id="birth-ref-month" placeholder="æœˆ">
                        <input type="number" id="birth-ref-day" placeholder="æ—¥">
                    </div>
                    <div class="info-text" style="margin-top: 10px; text-align: left;">
                        âš ï¸ å’Œæš¦å…¥åŠ›æ™‚ã€å…ƒå¹´ã¯ã€Œ1ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>
                </div>
                <button class="btn" onclick="calculateBirthYear()">ç”Ÿå¹´ã‚’è¨ˆç®—</button>
                <div class="result" id="birth-year-result">ç”Ÿå¹´ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            </div>
        </div>

        <div class="info-text">
            ğŸ’¡ æœˆæ—¥ã‚‚è€ƒæ…®ã—ãŸé«˜ç²¾åº¦ãªè¨ˆç®—ã‚’è¡Œã„ã¾ã™ã€‚é–å¹´ãƒ»é–æ—¥ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚<br>
            ğŸ“… è¥¿æš¦â†’å’Œæš¦å¤‰æ›ã¯æ˜æ²»å…ƒå¹´ï¼ˆ1868å¹´10æœˆ23æ—¥ï¼‰ä»¥é™ã®æ—¥ä»˜ã®ã¿å¯¾å¿œ
        </div>
    </div>

    <script>
        // å…ƒå·ã®å®šç¾©
        const eras = {
            'ä»¤å’Œ': { start: new Date(2019, 4, 1), startYear: 2019 },
            'å¹³æˆ': { start: new Date(1989, 0, 8), end: new Date(2019, 3, 30), startYear: 1989 },
            'æ˜­å’Œ': { start: new Date(1926, 11, 25), end: new Date(1989, 0, 7), startYear: 1926 },
            'å¤§æ­£': { start: new Date(1912, 6, 30), end: new Date(1926, 11, 24), startYear: 1912 },
            'æ˜æ²»': { start: new Date(1868, 9, 23), end: new Date(1912, 6, 29), startYear: 1868 }
        };

        function switchTab(index) {
            // ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            
            document.querySelectorAll('.tab')[index].classList.add('active');
            document.getElementById(`section${index}`).classList.add('active');
        }

        function isValidDate(year, month, day) {
            const date = new Date(year, month - 1, day);
            return date.getFullYear() === year && 
                   date.getMonth() === month - 1 && 
                   date.getDate() === day;
        }

        function convertToWareki() {
            const year = parseInt(document.getElementById('seireki-year').value);
            const month = parseInt(document.getElementById('seireki-month').value);
            const day = parseInt(document.getElementById('seireki-day').value);
            const resultDiv = document.getElementById('wareki-result');

            if (!year || !month || !day) {
                resultDiv.innerHTML = 'å¹´æœˆæ—¥ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            if (!isValidDate(year, month, day)) {
                resultDiv.innerHTML = 'æœ‰åŠ¹ãªæ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            const inputDate = new Date(year, month - 1, day);
            let eraName = '';
            let eraYear = 0;

            // å…ƒå·ã®åˆ¤å®š
            if (inputDate >= eras['ä»¤å’Œ'].start) {
                eraName = 'ä»¤å’Œ';
                eraYear = year - eras['ä»¤å’Œ'].startYear + 1;
            } else if (inputDate >= eras['å¹³æˆ'].start && inputDate <= eras['å¹³æˆ'].end) {
                eraName = 'å¹³æˆ';
                eraYear = year - eras['å¹³æˆ'].startYear + 1;
            } else if (inputDate >= eras['æ˜­å’Œ'].start && inputDate <= eras['æ˜­å’Œ'].end) {
                eraName = 'æ˜­å’Œ';
                eraYear = year - eras['æ˜­å’Œ'].startYear + 1;
            } else if (inputDate >= eras['å¤§æ­£'].start && inputDate <= eras['å¤§æ­£'].end) {
                eraName = 'å¤§æ­£';
                eraYear = year - eras['å¤§æ­£'].startYear + 1;
            } else if (inputDate >= eras['æ˜æ²»'].start && inputDate <= eras['æ˜æ²»'].end) {
                eraName = 'æ˜æ²»';
                eraYear = year - eras['æ˜æ²»'].startYear + 1;
            } else {
                resultDiv.innerHTML = 'æ˜æ²»ä»¥é™ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ1868å¹´10æœˆ23æ—¥ä»¥é™ï¼‰';
                resultDiv.className = 'result error';
                return;
            }

            const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
            resultDiv.innerHTML = `<strong>${eraName}${displayYear}${month}æœˆ${day}æ—¥</strong><br>ï¼ˆè¥¿æš¦${year}å¹´${month}æœˆ${day}æ—¥ï¼‰`;
            resultDiv.className = 'result';
        }

        function convertToSeireki() {
            const era = document.getElementById('era-select').value;
            const eraYear = parseInt(document.getElementById('era-year').value);
            const month = parseInt(document.getElementById('era-month').value);
            const day = parseInt(document.getElementById('era-day').value);
            const resultDiv = document.getElementById('seireki-result');

            if (!eraYear || !month || !day) {
                resultDiv.innerHTML = 'å¹´æœˆæ—¥ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            const seirekiYear = eras[era].startYear + eraYear - 1;

            if (!isValidDate(seirekiYear, month, day)) {
                resultDiv.innerHTML = 'æœ‰åŠ¹ãªæ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            const inputDate = new Date(seirekiYear, month - 1, day);
            
            // å…ƒå·ã®æœ‰åŠ¹æœŸé–“ãƒã‚§ãƒƒã‚¯
            if (eras[era].end && inputDate > eras[era].end) {
                const endDate = eras[era].end;
                const endEraYear = endDate.getFullYear() - eras[era].startYear + 1;
                const endDisplayYear = endEraYear === 1 ? 'å…ƒå¹´' : `${endEraYear}å¹´`;
                resultDiv.innerHTML = `${era}ã¯${endDate.getFullYear()}å¹´ï¼ˆ${era}${endDisplayYear}ï¼‰${endDate.getMonth() + 1}æœˆ${endDate.getDate()}æ—¥ã¾ã§<br>å…¥åŠ›ã•ã‚ŒãŸæ—¥ä»˜ã¯${era}ã®ç¯„å›²å¤–ã§ã™`;
                resultDiv.className = 'result error';
                return;
            }

            if (inputDate < eras[era].start) {
                const startDate = eras[era].start;
                resultDiv.innerHTML = `${era}ã¯${startDate.getFullYear()}å¹´ï¼ˆ${era}å…ƒå¹´ï¼‰${startDate.getMonth() + 1}æœˆ${startDate.getDate()}æ—¥ã‹ã‚‰é–‹å§‹<br>å…¥åŠ›ã•ã‚ŒãŸæ—¥ä»˜ã¯${era}ã®ç¯„å›²å¤–ã§ã™`;
                resultDiv.className = 'result error';
                return;
            }

            const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
            resultDiv.innerHTML = `<strong>è¥¿æš¦${seirekiYear}å¹´${month}æœˆ${day}æ—¥</strong><br>ï¼ˆ${era}${displayYear}${month}æœˆ${day}æ—¥ï¼‰`;
            resultDiv.className = 'result';
        }

        function calculateAge() {
            const eraType = document.getElementById('age-era-select').value;
            const inputYear = parseInt(document.getElementById('age-birth-year').value);
            const birthMonth = parseInt(document.getElementById('age-birth-month').value);
            const birthDay = parseInt(document.getElementById('age-birth-day').value);
            
            const refEraType = document.getElementById('age-ref-era-select').value;
            const refInputYear = parseInt(document.getElementById('age-ref-year').value);
            const refMonth = parseInt(document.getElementById('age-ref-month').value);
            const refDay = parseInt(document.getElementById('age-ref-day').value);
            
            const resultDiv = document.getElementById('age-result');

            if (!inputYear || !birthMonth || !birthDay) {
                resultDiv.innerHTML = 'ç”Ÿå¹´æœˆæ—¥ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            let birthYear;
            if (eraType === 'è¥¿æš¦') {
                birthYear = inputYear;
            } else {
                // å’Œæš¦ã‹ã‚‰è¥¿æš¦ã«å¤‰æ›
                birthYear = eras[eraType].startYear + inputYear - 1;
                
                // å…ƒå·ã®æœ‰åŠ¹æœŸé–“ãƒã‚§ãƒƒã‚¯
                const inputDate = new Date(birthYear, birthMonth - 1, birthDay);
                if (eras[eraType].end && inputDate > eras[eraType].end) {
                    const endDate = eras[eraType].end;
                    const endEraYear = endDate.getFullYear() - eras[eraType].startYear + 1;
                    const endDisplayYear = endEraYear === 1 ? 'å…ƒå¹´' : `${endEraYear}å¹´`;
                    resultDiv.innerHTML = `${eraType}ã¯${endDate.getFullYear()}å¹´ï¼ˆ${eraType}${endDisplayYear}ï¼‰${endDate.getMonth() + 1}æœˆ${endDate.getDate()}æ—¥ã¾ã§<br>å…¥åŠ›ã•ã‚ŒãŸç”Ÿå¹´æœˆæ—¥ã¯${eraType}ã®ç¯„å›²å¤–ã§ã™`;
                    resultDiv.className = 'result error';
                    return;
                }
                if (inputDate < eras[eraType].start) {
                    const startDate = eras[eraType].start;
                    resultDiv.innerHTML = `${eraType}ã¯${startDate.getFullYear()}å¹´ï¼ˆ${eraType}å…ƒå¹´ï¼‰${startDate.getMonth() + 1}æœˆ${startDate.getDate()}æ—¥ã‹ã‚‰é–‹å§‹<br>å…¥åŠ›ã•ã‚ŒãŸç”Ÿå¹´æœˆæ—¥ã¯${eraType}ã®ç¯„å›²å¤–ã§ã™`;
                    resultDiv.className = 'result error';
                    return;
                }
            }

            if (!isValidDate(birthYear, birthMonth, birthDay)) {
                resultDiv.innerHTML = 'æœ‰åŠ¹ãªæ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            // åŸºæº–æ—¥ã®è¨­å®š
            let refDate;
            if (refInputYear && refMonth && refDay) {
                let actualRefYear;
                if (refEraType === 'è¥¿æš¦') {
                    actualRefYear = refInputYear;
                } else {
                    // å’Œæš¦ã‹ã‚‰è¥¿æš¦ã«å¤‰æ›
                    actualRefYear = eras[refEraType].startYear + refInputYear - 1;
                    
                    // å…ƒå·ã®æœ‰åŠ¹æœŸé–“ãƒã‚§ãƒƒã‚¯
                    const inputDate = new Date(actualRefYear, refMonth - 1, refDay);
                    if (eras[refEraType].end && inputDate > eras[refEraType].end) {
                        const endDate = eras[refEraType].end;
                        const endEraYear = endDate.getFullYear() - eras[refEraType].startYear + 1;
                        const endDisplayYear = endEraYear === 1 ? 'å…ƒå¹´' : `${endEraYear}å¹´`;
                        resultDiv.innerHTML = `${refEraType}ã¯${endDate.getFullYear()}å¹´ï¼ˆ${refEraType}${endDisplayYear}ï¼‰${endDate.getMonth() + 1}æœˆ${endDate.getDate()}æ—¥ã¾ã§<br>å…¥åŠ›ã•ã‚ŒãŸåŸºæº–æ—¥ã¯${refEraType}ã®ç¯„å›²å¤–ã§ã™`;
                        resultDiv.className = 'result error';
                        return;
                    }
                    if (inputDate < eras[refEraType].start) {
                        const startDate = eras[refEraType].start;
                        resultDiv.innerHTML = `${refEraType}ã¯${startDate.getFullYear()}å¹´ï¼ˆ${refEraType}å…ƒå¹´ï¼‰${startDate.getMonth() + 1}æœˆ${startDate.getDate()}æ—¥ã‹ã‚‰é–‹å§‹<br>å…¥åŠ›ã•ã‚ŒãŸåŸºæº–æ—¥ã¯${refEraType}ã®ç¯„å›²å¤–ã§ã™`;
                        resultDiv.className = 'result error';
                        return;
                    }
                }
                
                if (!isValidDate(actualRefYear, refMonth, refDay)) {
                    resultDiv.innerHTML = 'æœ‰åŠ¹ãªåŸºæº–æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                    resultDiv.className = 'result error';
                    return;
                }
                refDate = new Date(actualRefYear, refMonth - 1, refDay);
            } else {
                refDate = new Date();
            }

            const birthDate = new Date(birthYear, birthMonth - 1, birthDay);

            if (birthDate > refDate) {
                resultDiv.innerHTML = 'ç”Ÿå¹´æœˆæ—¥ãŒåŸºæº–æ—¥ã‚ˆã‚Šæœªæ¥ã§ã™';
                resultDiv.className = 'result error';
                return;
            }

            let age = refDate.getFullYear() - birthDate.getFullYear();
            const monthDiff = refDate.getMonth() - birthDate.getMonth();

            if (monthDiff < 0 || (monthDiff === 0 && refDate.getDate() < birthDate.getDate())) {
                age--;
            }

            const refDateStr = refInputYear && refMonth && refDay ? 
                (refEraType === 'è¥¿æš¦' ? 
                    `è¥¿æš¦${refInputYear}å¹´${refMonth}æœˆ${refDay}æ—¥æ™‚ç‚¹` : 
                    `${refEraType}${refInputYear}å¹´${refMonth}æœˆ${refDay}æ—¥æ™‚ç‚¹`) : 'ä»Šæ—¥æ™‚ç‚¹';

            resultDiv.innerHTML = `<strong>${age}æ­³</strong><br><small>ï¼ˆ${refDateStr}ï¼‰</small>`;
            resultDiv.className = 'result';
        }

        function calculateBirthYear() {
            const currentAge = parseInt(document.getElementById('current-age').value);
            const eraType = document.getElementById('birth-era-select').value;
            const refYear = parseInt(document.getElementById('birth-ref-year').value);
            const refMonth = parseInt(document.getElementById('birth-ref-month').value);
            const refDay = parseInt(document.getElementById('birth-ref-day').value);
            const resultDiv = document.getElementById('birth-year-result');

            if (!currentAge && currentAge !== 0) {
                resultDiv.innerHTML = 'å¹´é½¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                resultDiv.className = 'result error';
                return;
            }

            // åŸºæº–æ—¥ã®è¨­å®šï¼ˆçœç•¥æ™‚ã¯ä»Šæ—¥ï¼‰
            let refDate;
            if (refYear && refMonth && refDay) {
                let actualRefYear;
                if (eraType === 'è¥¿æš¦') {
                    actualRefYear = refYear;
                } else {
                    // å’Œæš¦ã‹ã‚‰è¥¿æš¦ã«å¤‰æ›
                    actualRefYear = eras[eraType].startYear + refYear - 1;
                    
                    // å…ƒå·ã®æœ‰åŠ¹æœŸé–“ãƒã‚§ãƒƒã‚¯
                    const inputDate = new Date(actualRefYear, refMonth - 1, refDay);
                    if (eras[eraType].end && inputDate > eras[eraType].end) {
                        const endDate = eras[eraType].end;
                        const endEraYear = endDate.getFullYear() - eras[eraType].startYear + 1;
                        const endDisplayYear = endEraYear === 1 ? 'å…ƒå¹´' : `${endEraYear}å¹´`;
                        resultDiv.innerHTML = `${eraType}ã¯${endDate.getFullYear()}å¹´ï¼ˆ${eraType}${endDisplayYear}ï¼‰${endDate.getMonth() + 1}æœˆ${endDate.getDate()}æ—¥ã¾ã§<br>å…¥åŠ›ã•ã‚ŒãŸåŸºæº–æ—¥ã¯${eraType}ã®ç¯„å›²å¤–ã§ã™`;
                        resultDiv.className = 'result error';
                        return;
                    }
                    if (inputDate < eras[eraType].start) {
                        const startDate = eras[eraType].start;
                        resultDiv.innerHTML = `${eraType}ã¯${startDate.getFullYear()}å¹´ï¼ˆ${eraType}å…ƒå¹´ï¼‰${startDate.getMonth() + 1}æœˆ${startDate.getDate()}æ—¥ã‹ã‚‰é–‹å§‹<br>å…¥åŠ›ã•ã‚ŒãŸåŸºæº–æ—¥ã¯${eraType}ã®ç¯„å›²å¤–ã§ã™`;
                        resultDiv.className = 'result error';
                        return;
                    }
                }
                
                if (!isValidDate(actualRefYear, refMonth, refDay)) {
                    resultDiv.innerHTML = 'æœ‰åŠ¹ãªåŸºæº–æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
                    resultDiv.className = 'result error';
                    return;
                }
                refDate = new Date(actualRefYear, refMonth - 1, refDay);
            } else {
                refDate = new Date();
            }

            // æ—©ç”Ÿã¾ã‚Œãƒ»é…ç”Ÿã¾ã‚Œã§ç”Ÿå¹´ã‚’è¨ˆç®—
            const refYear_actual = refDate.getFullYear();
            
            // æ—©ç”Ÿã¾ã‚Œï¼ˆ1æœˆ1æ—¥ï½4æœˆ1æ—¥ç”Ÿã¾ã‚Œï¼‰ã®ç”Ÿå¹´
            const earlyBirthYear = refYear_actual - currentAge;
            
            // é…ç”Ÿã¾ã‚Œï¼ˆ4æœˆ2æ—¥ï½12æœˆ31æ—¥ç”Ÿã¾ã‚Œï¼‰ã®ç”Ÿå¹´
            const lateBirthYear = refYear_actual - currentAge - 1;

            // å’Œæš¦å¤‰æ›
            const earlyWareki = getWarekiFromSeireki(earlyBirthYear, 1, 1);
            const lateWareki = getWarekiFromSeireki(lateBirthYear, 4, 2);

            const refDateStr = refYear && refMonth && refDay ? 
                (eraType === 'è¥¿æš¦' ? 
                    `è¥¿æš¦${refYear}å¹´${refMonth}æœˆ${refDay}æ—¥æ™‚ç‚¹` : 
                    `${eraType}${refYear}å¹´${refMonth}æœˆ${refDay}æ—¥æ™‚ç‚¹`) : 'ä»Šæ—¥æ™‚ç‚¹';

            // æ—©ç”Ÿã¾ã‚Œãƒ»é…ç”Ÿã¾ã‚Œã®å’Œæš¦å¹´ã ã‘æŠ½å‡º
            const earlyWarekiYear = earlyWareki.split('å¹´')[0];
            const lateWarekiYear = lateWareki.split('å¹´')[0];

            resultDiv.innerHTML = `<div style="text-align: left;">
                <div style="font-size: 1.4rem; margin-bottom: 20px; text-align: center; color: #0891b2;">
                    <strong>${currentAge}æ­³ã®æ–¹ã®ç”Ÿå¹´</strong>
                </div>
                
                <div style="background: #f8fafc; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #0891b2;">
                    <div style="font-weight: bold; color: #0c4a6e; margin-bottom: 8px;">æ—©ç”Ÿã¾ã‚Œï¼ˆ1æœˆ1æ—¥ï½4æœˆ1æ—¥ï¼‰</div>
                    <div style="font-size: 1.1rem;">è¥¿æš¦<strong>${earlyBirthYear}å¹´</strong>ã€€${earlyWarekiYear}å¹´</div>
                </div>
                
                <div style="background: #f8fafc; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #06b6d4;">
                    <div style="font-weight: bold; color: #0c4a6e; margin-bottom: 8px;">é…ç”Ÿã¾ã‚Œï¼ˆ4æœˆ2æ—¥ï½12æœˆ31æ—¥ï¼‰</div>
                    <div style="font-size: 1.1rem;">è¥¿æš¦<strong>${lateBirthYear}å¹´</strong>ã€€${lateWarekiYear}å¹´</div>
                </div>
                
                <div style="text-align: center; font-size: 0.9rem; color: #64748b;">
                    ${refDateStr}
                </div>
            </div>`;
            resultDiv.className = 'result';
        }

        function getWarekiFromSeireki(year, month, day) {
            const inputDate = new Date(year, month - 1, day);
            
            if (inputDate >= eras['ä»¤å’Œ'].start) {
                const eraYear = year - eras['ä»¤å’Œ'].startYear + 1;
                const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
                return `ä»¤å’Œ${displayYear}${month}æœˆ${day}æ—¥`;
            } else if (inputDate >= eras['å¹³æˆ'].start && inputDate <= eras['å¹³æˆ'].end) {
                const eraYear = year - eras['å¹³æˆ'].startYear + 1;
                const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
                return `å¹³æˆ${displayYear}${month}æœˆ${day}æ—¥`;
            } else if (inputDate >= eras['æ˜­å’Œ'].start && inputDate <= eras['æ˜­å’Œ'].end) {
                const eraYear = year - eras['æ˜­å’Œ'].startYear + 1;
                const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
                return `æ˜­å’Œ${displayYear}${month}æœˆ${day}æ—¥`;
            } else if (inputDate >= eras['å¤§æ­£'].start && inputDate <= eras['å¤§æ­£'].end) {
                const eraYear = year - eras['å¤§æ­£'].startYear + 1;
                const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
                return `å¤§æ­£${displayYear}${month}æœˆ${day}æ—¥`;
            } else if (inputDate >= eras['æ˜æ²»'].start && inputDate <= eras['æ˜æ²»'].end) {
                const eraYear = year - eras['æ˜æ²»'].startYear + 1;
                const displayYear = eraYear === 1 ? 'å…ƒå¹´' : `${eraYear}å¹´`;
                return `æ˜æ²»${displayYear}${month}æœˆ${day}æ—¥`;
            } else {
                return `è¥¿æš¦${year}å¹´${month}æœˆ${day}æ—¥`;
            }
        }

        // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®š
        window.onload = function() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();

            // å¹´é½¢è¨ˆç®—ç”¨ã®åŸºæº–æ—¥ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
            document.getElementById('age-ref-year').placeholder = `å¹´ï¼ˆä»Šæ—¥: ${year}ï¼‰`;
            document.getElementById('age-ref-month').placeholder = `æœˆï¼ˆä»Šæ—¥: ${month}ï¼‰`;
            document.getElementById('age-ref-day').placeholder = `æ—¥ï¼ˆä»Šæ—¥: ${day}ï¼‰`;

            // ç”Ÿå¹´è¨ˆç®—ç”¨ã®åŸºæº–æ—¥ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
            document.getElementById('birth-ref-year').placeholder = `å¹´ï¼ˆä»Šæ—¥: ${year}ï¼‰`;
            document.getElementById('birth-ref-month').placeholder = `æœˆï¼ˆä»Šæ—¥: ${month}ï¼‰`;
            document.getElementById('birth-ref-day').placeholder = `æ—¥ï¼ˆä»Šæ—¥: ${day}ï¼‰`;
        };
    </script>
</body>
</html>